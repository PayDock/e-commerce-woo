(()=>{"use strict";const e=window.React,t=window.wp.i18n,n=window.wc.wcBlocksRegistry,a=window.wp.htmlEntities,o=(0,window.wc.wcSettings.getSetting)("paydock_data",{}),r=(0,t.__)("Paydock Payments","paydock-for-woo"),c=(0,t.__)("Place Order by Paydock","paydock-for-woo"),d=(0,t.__)("Please fill card data","paydock-for-woo"),s=(0,a.decodeEntities)(o.title)||r;let i;function l(e){return clearInterval(i),new Promise((t=>i=setTimeout(t,e)))}const p=t=>{const{eventRegistration:n,emitResponse:r}=t,{onPaymentSetup:c}=n;(0,e.useEffect)((()=>{const e=c((async()=>{window.widget.trigger("submit_form");let e=!1;window.widget.on(paydock.EVENT.FINISH,(t=>{e=!0}));for(let t=1;t<=100&&(await l(100),!e);t++);const t=document.querySelector('input[name="payment_source_token"]').value,n=o.gatewayId,a=o.cardDirectCharge,c=o.cardSaveCard;return t.length?{type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{paymentSourceToken:t,gatewayId:n,cardDirectCharge:a,cardSaveCard:c}}}:{type:r.responseTypes.ERROR,message:d}}));return()=>{e()}}),[r.responseTypes.ERROR,r.responseTypes.SUCCESS,c]);const s=(0,e.createElement)("div",null,(0,a.decodeEntities)(o.description||"")),i=(0,e.createElement)("div",{id:"paydockWidgetCard"}),p=(0,e.createElement)("input",{type:"hidden",name:"payment_source_token"});return(0,e.createElement)("div",null,s,i,p)},y={name:"paydock_gateway",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:s})}),null),content:(0,e.createElement)(p,null),edit:(0,e.createElement)(p,null),placeOrderButtonLabel:c,canMakePayment:()=>!0,ariaLabel:s,supports:{features:o.supports}};(0,n.registerPaymentMethod)(y)})();